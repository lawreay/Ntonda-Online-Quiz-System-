<?php
session_start();
if(isset($_SESSION['login_id'])){
    header('Location:home.php');
    exit;
}
?>
<!doctype html>
<html>
 <head>
    <?php include('header.php') ?>
    <title>Login | Ntonda Online Quiz System</title>
    <style>
        
        body#login-body{
            background: linear-gradient(135deg,#0f2b70 0%, #3b82f6 100%);
            min-height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            padding:40px 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        
        .header-card{
            width:760px;
            max-width:calc(100% - 80px);
            background:rgba(255,255,255,0.98);
            border-radius:14px;
            padding:32px 40px;
            box-shadow:0 18px 40px rgba(8,27,77,0.35);
            text-align:center;
            margin-bottom:36px;
        }

        .header-card h3{
            margin:0 0 8px 0;
            color:#123479;
            font-size:28px;
            font-weight:700;
            letter-spacing:0.4px;
        }

        .header-card p{
            margin:0 auto;
            max-width:640px;
            color:#51647a;
            line-height:1.6;
        }

        .learn360-badge{display:inline-block;background:linear-gradient(135deg,#3b82f6,#1e3a8a);color:#fff;padding:6px 12px;border-radius:20px;font-weight:600}

        .login-wrap{width:420px;max-width:calc(100% - 40px);}

        .login-card{
            background:#fff;
            border-radius:12px;
            overflow:hidden;
            box-shadow:0 16px 40px rgba(11,38,86,0.35);
            transition:transform .25s ease, box-shadow .25s ease;
        }

        .login-card:hover{transform:translateY(-6px);box-shadow:0 28px 60px rgba(11,38,86,0.45)}

        .card-header-edge{
            background:linear-gradient(135deg,#2456c9 0%, #3b82f6 100%);
            color:#fff;
            padding:22px;
            text-align:center;
            font-weight:700;
            font-size:20px;
        }

        .card-body{padding:28px 30px}

        .form-group{margin-bottom:18px}

        label{display:block;font-size:13px;color:#2f495f;margin-bottom:8px}

        .input-wrap{background:#fff;border-radius:10px;padding:10px;border:1px solid #e6e9ef}

        .form-control{
            border:0;outline:0;width:100%;padding:12px 10px;font-size:15px;border-radius:6px;background:transparent;box-sizing:border-box;color:#2b3b51
        }

        .form-control:focus{box-shadow:0 6px 18px rgba(59,130,246,0.12);}

        .btn-primary{
            background:linear-gradient(90deg,#163c9e 0%,#3b82f6 100%);
            border:0;color:#fff;padding:12px 18px;border-radius:10px;font-weight:700;width:100%;box-shadow:0 8px 20px rgba(28,81,170,0.28);transition:transform .18s ease,box-shadow .18s ease}

        .btn-primary:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(28,81,170,0.36)}

        @media (max-width:600px){
            .header-card{padding:20px}
            .card-body{padding:20px}
            .login-wrap{width:100%}
        }
    </style>
 </head>
 <body id="login-body">

    <div class="header-card" role="banner">
        <h3>Ntonda Online Quiz System</h3>
        <p>Interactive assessment platform enabling students to test their knowledge with instant feedback and progress tracking across multiple subjects.</p>
        <div style="margin-top:16px;font-size:13px;color:#6b7788">Powered by <span class="learn360-badge">Learn360</span> &nbsp; <a href="https://learn360.free.nf/" target="_blank" style="color:#1e3a8a;text-decoration:none">learn360.free.nf</a>
            <div style="margin-top:8px;font-size:12px;color:#6b7788">Developed by <a href="https://lawreay.github.io/portfolio/" target="_blank" style="color:#1e3a8a">Lawrence Phuka Chikapa</a></div>
        </div>
    </div>

    <div class="login-wrap">
        <div class="login-card">
            <div class="card-header-edge">Login</div>
            <div class="card-body">
                <form id="login-frm">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <div class="input-wrap"><input id="username" class="form-control" name="username" type="text" autocomplete="username" required></div>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="input-wrap"><input id="password" class="form-control" name="password" type="password" autocomplete="current-password" required></div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn-primary">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        $(function(){
            $('#login-frm').on('submit', function(e){
                e.preventDefault();
                var btn = $(this).find('button[type=submit]');
                btn.prop('disabled', true).text('Please wait...');
                $.ajax({
                    url: './login_auth.php?type=1',
                    method: 'POST',
                    data: $(this).serialize(),
                    error: function(err){
                        console.error(err);
                        alert('An error occured');
                        btn.prop('disabled', false).text('Login');
                    },
                    success: function(resp){
                        if(resp == 1) location.replace('home.php');
                        else { alert('Incorrect username or password.'); btn.prop('disabled', false).text('Login'); }
                    }
                });
            });
        });
    </script>

 </body>
</html>
